<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    {% include 'head.html' %}
    {% if user.is_staff %}
        <script src="{% static '/tinymce/tinymce.min.js' %}"></script>
    {% endif %}
    <script src="https://unpkg.com/vue/dist/vue.min.js"></script>

    <style>
        .background-highlight{
            background-color: {{ colors.highlight }};
        }
        .text-highlight{
            color: {{ colors.highlight }} !important;
        }
        .bright-text{
            color: {{ colors.bright_text }} !important;
        }
        .modern-link{
            color: {{ colors.dark_text }};
            text-decoration: none;
        }
        .material-input:focus{
            border-color: {{ colors.highlight }};
        }
        .alternate-font{
            font-family: "Slabo 27px", sans-serif;
        }
        .tag:hover {
            cursor: pointer;
        }
        .no-scroll{
            position: relative;
            overflow: hidden !important;
            -webkit-overflow-scrolling: auto !important;
        }
        /* -- Slide Show Styles -- */
        .slide {
            height: 100%;
        }
        /* -- END slide show styling -- */

        /* -- Page-Specific IDs -- */
        #parallax-overlay{
            text-align: center;
            color: #fff;
            top: calc( 20 / (6vw + 20vh)) !important;
        }
        #parallax-overlay h1{
            min-width: 45%;
            display: inline-block;
            text-transform: capitalize;
            padding: 0.5em 0.5em calc(0.5em - 1vh - 1.5vw);
            font-family: "Montserrat",sans-serif;
            font-size: calc(4em - (20px - 2vw));
            text-shadow: 0px 0px 4px rgba(0, 0, 0, 0.6);
            font-weight: 700;
            margin: 0;
        }
        #parallax-overlay h3{
            margin-top: 0;
            font-family: "Slabo 27px",serif;
            font-size: calc(2em - (10px - 1vw));
            text-shadow: 0px 0px 6px rgba(0, 0, 0, 0.8);
            font-weight: 400;
        }
        #search-container{
            text-align: center;
            display: block;
            text-shadow: 0px 0px 4px rgba(0, 0, 0, 0.6);
            font-family: "Montserrat", sans-serif;
            font-weight: 500;
        }
        #search-term{
            width: 0;
            opacity:0;
            padding:1px;
            color: #fff;
            font-family: inherit;
        }
        #search-term:focus{
            opacity: 1;
            width: auto;
        }
        #search-term:focus + span{
            opacity: 0;
            width: 0;
            overflow: hidden;
            display: none;
        }
        #empty-set{
            margin-top: 0;
            padding-top: 2em;
            font-weight: 300;
        }
        #sub-landing{
            min-height: calc(100vh - 65px);
            background-color: #f5f5f5;
            overflow: hidden;
        }
        #new-petition{
            position: fixed;
            bottom: 30px;
            right: 30px;
            height: 70px;
            width: 70px;
            text-align: center;
            border-color: rgba(243, 110, 33, 0.8);
            z-index:1000;
            background-color: rgba(243, 110, 33, 0.8);
            -webkit-box-shadow: 0px 5px 10px 0px rgba(0,0,0,0.3);
            -moz-box-shadow:    0px 5px 10px 0px rgba(0,0,0,0.3);
            -o-box-shadow:      0px 5px 10px 0px rgba(0,0,0,0.3);
            box-shadow:         0px 5px 10px 0px rgba(0,0,0,0.3);
        }
        #new-petition:hover{
            background-color: rgba(243, 110, 33, 1);
            -webkit-box-shadow: 0px 2px 10px 0px rgba(0,0,0,0.4);
            -moz-box-shadow:    0px 2px 10px 0px rgba(0,0,0,0.4);
            -o-box-shadow:      0px 2px 10px 0px rgba(0,0,0,0.4);
            box-shadow:         0px 2px 10px 0px rgba(0,0,0,0.4);
            text-shadow:        0px 5px 10px rgba(0,0,0,0.2);
        }
        #filter-sort{
            width: calc(200px + 1em);
            overflow-y: auto;
            position: relative;
            max-height: calc(100vh - 90px);
        }
        #filter-sort h3, #filter-sort h5{
            font-family: "Montserrat", sans-serif;
            font-weight: 600;
            color: #757575;
        }
        #filter-sort select{
            -webkit-appearance: none;
            -moz-appearance: none;
            -ms-appearance: none;
            -o-appearance: none;
            appearance: none;
            width: 196px;
            padding:10px;
            border: none;
            font-family: "Montserrat", sans-serif;
            font-weight: 400;
            font-size: 0.9em;
            color: #757575;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAAhklEQVR4Ae3NsQ3CYAxE4VdmA/KvgygQLAtdJgkZhVSmQ8hFLKwr76tP9zAzMytdOFEZnGm6s7MWicHGmysNN3aCyIl8TxC9xJMgDhOD13fz4G8Ty2Fi/rlfmECQENwXCcF9kZDcF4mZNd9rE/L7nEj38kS61yfSvT6R7vWJdK9PdO7NzMw+ihJ379BDyXQAAAAASUVORK5CYII=');
            background-position: calc(100% - 10px) 50%;
            background-repeat: no-repeat;
            background-size: 30px;
            background-color: #fff;
        }
        #filter-sort-content-box{
            width: 200px;
            margin-left: 1em;
            text-align: left;
        }
        #filter-sort .tag{
            text-transform: capitalize;
            font-size: 1em;
            padding-top: 5px;
            padding-bottom:5px;
            padding-left:10px;
            padding-right:10px;
            margin-left: 5px;
            margin-right: 5px;
            margin-top:5px;
        }
        #filter-sort .tag:hover:not(.current-tag){
            background-color:#fff;
            -webkit-box-shadow: 0px 0px 5px 0px #eee;
            -moz-box-shadow:    0px 0px 5px 0px #eee;
            -o-box-shadow:      0px 0px 5px 0px #eee;
            box-shadow:         0px 0px 5px 0px #eee;
        }
        #filter-sort .current-tag{
            color: {{ colors.highlight }} !important;
            background-color: #fff;
            -webkit-box-shadow: 0px 0px 5px 0px #eee;
            -moz-box-shadow:    0px 0px 5px 0px #eee;
            -o-box-shadow:      0px 0px 5px 0px #eee;
            box-shadow:         0px 0px 5px 0px #eee;
        }
        #mobile-filter{
            display: none;
        }
        /* - Petitions - */
        #petitions{
            padding-bottom: 1em;
            width: calc(100% - (200px + 1em));
        }
        #petitions-container{
            overflow: hidden;
            -moz-column-count: 3;
            -webkit-column-count:3;
            column-count:3;
            -moz-column-gap: 1em;
            -webkit-column-gap: 1em;
            column-gap: 1em;
            width: calc(100% - 2em);
            margin: 0 auto;
        }
        .petition{
            background-color: #fff;
            color: #0f0f0f;
            padding-bottom: 1.2em;
            width: calc(100% - 10px);
            margin-left: 5px;
            margin-right: 5px;
            overflow: hidden;
            display: inline-block;
            margin-top: 1.2em;
            -webkit-backface-visibility: hidden;
            -webkit-transform: translateZ(0);
        }
        .petition:hover{
            cursor: pointer;
        }
        .petition.in-progress{
            border-bottom: 4px solid #f36e21;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }
        .petition.responded{
            border-bottom: 4px solid #9d5f4b;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }
        .petition progress{
            height: 5px;
            display: block;
        }
        progress{
            border-radius: 0 !important;
        }
        progress[value]::-webkit-progress-bar {
            border-radius: 0 !important;
        }
        progress[value]::-moz-progress-bar {
            border-radius: 0 !important;
        }
        .petition-body{
            padding: 1.2em;
        }
        .petition-signatures{
            margin-top: 0;
            padding-top: 0;
            font-weight: 300;
        }
        .petition-title{
            font-weight: 700;
            font-family: "Montserrat", sans-serif;
            text-transform: capitalize;
            font-size: 1.5em;
        }
        .petition ul{
            overflow: visible;
            padding: 0;
            margin: 0;
        }
        .petition ul:hover{
            cursor: auto;
        }
        .petition .tag{
            display: inline-block;
            padding: 2px 5px;
            margin: 5px 7px 0 0px;
            float: left;
            background-color: {{ colors.bright_text }};
            color:{{ colors.highlight }};
            border:1px solid {{ colors.highlight }};
            -webkit-border-radius:40px;
            -moz-border-radius:40px;
            border-radius:40px;
            font-weight: 400;
        }
        .petition .tag:hover{
            -webkit-box-shadow: 0px 0px 5px 0px #aaa;
            -moz-box-shadow:    0px 0px 5px 0px #aaa;
            -o-box-shadow:      0px 0px 5px 0px #aaa;
            box-shadow:         0px 0px 5px 0px #aaa;
            background-color: {{ colors.highlight_hover }};
            color: {{ colors.bright_text }};
        }
        #search-container:hover #search-term{
            border-bottom-color: {{ colors.bright_text }} !important;
        }
        #modal-template .modal-header h1{
            margin-top: -5px;
            margin-bottom: 0;
            text-transform: capitalize;
            font-family: "Montserrat", Arial;
        }
        #modal-template *{
            text-align: left;
        }
        #petition-modal .modal-container{
            max-height: 95vh;
            height:95vh;
            overflow: scroll;
        }
        #petition-modal .modal-header{
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }
        #petition-modal .modal-header h2{
            margin-top: 10px;
            margin-bottom: 10px;
            margin-left: 10px;
            font-family: "Montserrat", sans-serif;
            color: {{ colors.highlight }};
            text-transform: capitalize;
        }
        #petition-modal .modal-header span{
            margin-left: 10px;
        }
        #petition-modal{
            position: relative;
        }
        #petition-modal #petition-close{
            position: absolute;
            right: 10px;
            top: 10px;
            color: #f36e21;
        }
        #petition-modal #petition-close:hover{
            cursor: pointer;
        }
        #petition-modal .modal-body {
            margin-bottom: 75px;
            height: calc(95vh - 140px);
            overflow: auto;
            background-color: #f0f0f0;
        }
        #petition-modal .modal-header h2, #petition-modal .modal-header span{
            max-width: calc(100% - 44px);
        }
        #petition-modal .modal-header span.inline-block{
            margin-right: 60px;
        }
        #petition-modal .modal-footer{
            position: absolute;
            bottom:0px;
            left:0;
            right:0;
            background-color: #fff;
        }
        #petition-modal .modal-footer .material-button{
            padding: 7px 15px 7px 15px;
        }

        #timeline-container{
            background-color: #f0f0f0;
            color: #0f0f0f;
            padding: 0 5%;
            position: relative;
            -webkit-transform: translateZ(0);
        }
        #timeline-container p:first-child{
            margin-top: 0;
        }
        .modal-body{
            position: relative;
        }
        .timeline-element:before{
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: calc(-3.5vw + 3px);
            float: left;
            height: 100%;
            width: 4px;
            background: #ccc;
            z-index: 1;
        }
        .timeline-element{
            /*display: inline-block;*/
            padding-top: 30px;
        }
        .timeline-element-wrap{
            padding: 10px;
            position: relative;
            background-color: #fff;
        }
        .timeline-element[data-type="created"] .timeline-element-wrap{
            background-color: transparent;
        }
        .timeline-element-arrow{
            position: absolute;
            top: 9px;
            left: -23px;
            -webkit-transform: rotateZ(45deg);
            transform: rotateZ(45deg);
            background-color: #fff;
            width: 3em;
            height: 3em;
            z-index: -1;
        }
        .timeline-element-dot{
            position: absolute;
            top: 29px;
            border: none;
            left: calc(1px - 3.55vw);
            height: 9px;
            width: 9px;
            background-color: #f36e21;
            z-index: 3;
        }
        .timeline-element-header{
            font-weight: 300;
            font-family: "Work Sans", Arial;
            margin: 0;
            padding-top: 1em;
            padding-bottom: 1em;
            text-align: right;
            overflow: hidden;
        }
        .timeline-element-body{
            overflow: hidden;
            word-wrap: break-word;
        }
        .timeline-element-header span.text-highlight{
            text-transform: uppercase;
            font-family: "Montserrat", sans-serif;
            font-weight: 800;
            float: left;
        }
        .timeline-element-content, .timeline-element-content *{
            font-family: "Muli", "Work Sans", Arial !important;
            font-size: 21px !important;
            font-weight: 300 !important;
        }
        .timeline-element-content p{
            margin: 0;
        }
        .timeline-element-content img{
            margin: 0 auto;
            display: block;
        }
        .timeline-element:last-child{
            padding-bottom: 34px;
        }
        .petition-action-card{
            font-family: "Montserrat", sans-serif;
            height:53px;
            max-height: 53px;
            padding-top:7px;
        }
        .petition-action-card:not(#signature-card){
            padding-right: 1vw;
        }
        .petition-action-card h3{
            margin-top: 3px;
            margin-bottom: 3px;
            font-size: 1em;
            font-weight: 500;
        }
        #signature-card{
            line-height: 45px;
            font-weight: 700;
        }
        #sign-petition-button {
            font-weight: 700;
            font-size: 0.9em;
            padding: 0 !important;
        }
        #sign-petition-button span{
            display: block;
            padding: 7px 15px 7px 15px;
        }
        #sign-petition-button{
            background-color: transparent;
            color: {{ colors.highlight_hover }};
        }
        #sign-petition-button:not(:disabled):hover{
            background-color: {{ colors.highlight_hover }};
        }
        #sign-petition-button:not(:disabled):hover span{
            color: {{ colors.light_text }};
        }
        #sign-petition-button:disabled:hover{
            cursor: auto;
            transform: scale(1);
        }
        #signature-card span{
            color: {{ colors.highlight_hover }};
        }
        .social-icon{
            padding-top: 1px;
            padding-bottom: 1px;
            margin-right: 10px;
        }
        .social-icon img{
            height: 1em;
        }
        #petition-modal .modal-container{
            overflow-y: hidden;
        }

        #petition-modal .modal-footer{
            overflow: visible;
        }

        #petition-modal .modal-footer .hide-box{
            position:absolute;
            top:-25px;
            left: calc( 50% - (55px / 2) );
            display: block;
            width: 45px;
            height: 25px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-bottom: none;
            color: #0f0f0f;
            content: "V";
            text-align: center;
            line-height: 25px;
            font-size: 1em;
        }
        #petition-modal .modal-footer .hide-box:hover{
            cursor:pointer;
        }
        #petition-modal .petition-progress{
            margin-bottom: -1px;
            float: left;
        }
        .petition-progress{
            width: 100%;
        }
        progress{
            -webkit-appearance: none;
            height: 15px;
            z-index:1;
        }
        progress[value]::-webkit-progress-bar {
            background-color: #cfcfcf;
            content: "1";
            color:#fff;
            text-align: center;
        }
        progress[value]::-webkit-progress-value {
            background-color: #f36e21;
            border-top-right-radius: 2px;
            border-bottom-right-radius: 2px;
            background-size: 35px 20px, 100% 100%, 100% 100%;
            text-align: center;
        }
        progress[value]::-moz-progress-bar {
            background-color: #f36e21;
            border-radius: 2px;
            background-size: 35px 20px, 100% 100%, 100% 100%;
        }
        progress::-webkit-progress-value{
            -webkit-transition: width 500ms cubic-bezier(0.19, 1, 0.22, 1) 10ms;
        }
        progress::-moz-progress-bar {

        }

        #action-drawer-icon-container{
            display: none;
            height: 15px;
            width: 50px;
            padding-bottom: 5px;
            text-align: center;
            position: absolute;
            top: -22px;
            left: calc(50% - 25px);
            border: 1px solid #ccc;
            border-top: 3px solid #ccc;
            border-bottom: none;
            background-color: #fff;
            color: #a0a0a0;
        }
        #action-drawer-icon-container:hover{
            border-top-color: #aaa;
            height: 17px;
            line-height: 17px;
            top: -24px;
            cursor: pointer;
            color: #f36e21;
        }

        #edit-button, #publish-button{
            width: calc(50% - 14px);
            font-size: 0.8em;
            text-transform: capitalize;
        }

        #admin-actions{
            display: inline-block;
            position: absolute;
            right: 0;
            top: -280px;
            height: auto;
            width: 55px;
        }
        #admin-actions div.circle{
            height: 50px;
            width: 50px;
            margin-bottom: 20px;
            background-color: #fff;
            border: none;
        }
        #admin-actions div.circle i{
            line-height: 50px;
        }
        #admin-actions div.circle span.invisible{
            font-family: "Montserrat", sans-serif;
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            text-align: center;
            margin-top: -10px;
            padding-top: 10px;
            display: block;
        }
        #admin-actions div.circle:hover{
            background-color: #f36e21;
            color: #fff;
        }
        #admin-actions div.circle:hover span.invisible{
            opacity: 1;
            color: #f36e21;
        }
        .admin-action-spacer{
            height:50px;
            margin-bottom: 20px;
        }
        #back-up{
            bottom: 105px;
            right: 42.5px;
            left: auto;
            border: none !important;
            background-color: #fff;
            color: #0f0f0f;
        }
        /* -- Responsiveness -- */

        @media screen and (max-width: 1170px){
            #signature-card{
                float: none;
                margin: 0 auto;
                display: block;
                text-align: center ;
            }
        }
        @media screen and (max-width: 1170px) and (min-width: 890px){
            #action-cards{
                width: 100%;
                float: none;
                -webkit-column-count: 5; /* Chrome, Safari, Opera */
                -moz-column-count: 5; /* Firefox */
                column-count: 5;
                -moz-column-gap: 0.5em;
                -webkit-column-gap: 0.5em;
                column-gap: 0.5em;
                white-space:nowrap;
                overflow: hidden;
            }
        }
        @media screen and (max-width: 1020px){
            #filter-sort{
                width: 200px;
                position: relative;
            }
            #filter-sort-content-box{
                width: 180px;
            }
            #filter-sort select{
                width: 177px;
            }
            #petitions{
                width: calc(100% - 200px);
            }
            #petitions-container{
                -moz-column-count: 2;
                -webkit-column-count:2;
                column-count:2;
            }
            #timeline-container{
                width:85%;
                padding-left: 10%;
            }
            .timeline-element:before{
                left: calc(-6vw + 3px);
            }
            .timeline-element-dot{
                left: calc(1px - 6.1vw);
            }
        }
        @media screen and (max-width: 890px) {
            #petition-actions {
                text-align: center;
            }

            #action-cards {
                float: none;
                display: inline-block;
                margin: 0 auto;
            }

            #timeline-container {
                width: 60vw;
                padding-left: 11%;
                overflow: auto;
                overflow-x: visible;
            }

            .timeline-element:before {
                left: calc(-8vw + 3px);
            }

            .timeline-element-dot {
                left: calc(1px - 8.1vw);
            }
            .timeline-element-wrap{
                width:60vw;
            }
            .timeline-element-wrap img{
                width: 100% !important;
                height: auto !important;
            }
        }
        @media screen and (max-width: 830px){
            #action-drawer-icon-container{
                display: block;
            }
            .petition-action-card:not(#signature-card){
                width: 50%;
                padding:0;
                margin:0;
                float: left !important;
                text-align: center;
            }
            .social-icon{
                float: none;
            }
        }
        @media screen and (max-width: 800px){
            #petition-modal .modal-body:after{
                margin-left:0;
            }
            #petitions-container{
                -moz-column-count: 1;
                -webkit-column-count:1;
                column-count:1;
            }
            .timeline-element-content{
                font-size: 18px !important;
            }
        }
        @media screen and (max-width: 700px){
            #sub-landing{
                padding-top: 110px;
            }
            #filter-sort{
                float: none;
                right: 0;
                width: 100%;
                z-index:100;
                position: absolute;
                top:0px;
                left: 0;
                padding-top: 10px;
                border-bottom: 1px solid #ccc;
                box-shadow: 0px 5px 5px -5px #ccc;
                -webkit-box-shadow: 0px 5px 5px -5px #ccc;
                -moz-box-shadow: 0px 5px 5px -5px #ccc;
                -o-box-shadow: 0px 5px 5px -5px #ccc;
            }
            #filter-sort.attached{
                background-color: #f5f5f5;
            }
            .filter-sort-title{
                display: none;
            }
            #filter-sort select{
                margin-top: 10px;
            }
            #filter-sort-content-box{
                width: calc(100% - 2em);
                text-align: center;
            }
            #filter-sort-content-box ul{
                display: none;
            }
            #mobile-filter{
                display: inline-block;
                margin-bottom: 20px;
            }
            #sort, #mobile-filter{
                width: calc(100% - 10px) !important;
                min-width: 200px;
            }
            #petitions{
                float: none;
                width: 100%;
                padding-top:10px;
            }
        }
        @media screen and (max-width: 600px){
            #petition-modal #timeline-container{
                padding-bottom: 100px;
            }
            #signature-card{
                width: calc(100% - 20px);
                max-height: none;
                height: auto;
            }
            #signature-card span{
                width: 100%;
                text-align: center;
                display: block;
                padding:0;
            }
            #sign-petition-button span{
                padding-top: 7px;
                padding-bottom: 7px;
            }
            #sign-petition-button{
                width: 100%;
            }
            #social-share{
                margin-top: 10px;
                margin-right: calc(50% - 95px);
            }
            .timeline-element:before{
                left: calc(-8vw + 3px);
            }
            .timeline-element-dot{
                left: calc(1px - 8.1vw);
            }
            .timeline-element-header{
                text-align: left;
                padding-top: 0.4em;
            }
            .timeline-element-header .text-highlight{
                display: block;
                width: 100%;
                text-align: left
            }
        }
        @media screen and (max-width: 375px) {

            #timeline-container{
                padding-left: 19%;
            }
            .timeline-element:before{
                left: calc(-13vw + 3px);
            }
            .timeline-element-dot{
                left: calc(1px - 13.2vw);
            }

        }
        #loading-petitions{
            text-align: center;
        }
        .load-container * {
            box-sizing: border-box;
            -o-box-sizing: border-box;
            -ms-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
        }
        .load-container {
            margin: 0 auto;
            max-width: 545px;
        }

        .load-container ul li{
            list-style: none;
        }

        .load-flex-container {
            display: flex;
            display: -o-flex;
            display: -ms-flex;
            display: -webkit-flex;
            display: -moz-flex;
            flex-direction: row;
            -o-flex-direction: row;
            -ms-flex-direction: row;
            -webkit-flex-direction: row;
            -moz-flex-direction: row;
            flex-wrap: wrap;
            -o-flex-wrap: wrap;
            -ms-flex-wrap: wrap;
            -webkit-flex-wrap: wrap;
            -moz-flex-wrap: wrap;
            justify-content: space-around;
            padding-left: 0;
            margin-top: 0;
            padding-top: 40px;
            margin-bottom: 0;
        }
        .load-flex-container li {
            height: 97px;
            width: 97px;
            margin: 3px 19px;
            margin-top: 6px;
            position: relative;
            text-align: center;
        }

        .load-loading, .load-loading:after, .load-loading:before {
            display: inline-block;
            position: relative;
            width: 5px;
            height: 49px;
            background: #f36e21;
            margin-top: 5px;
            border-radius: 975px;
            -o-border-radius: 975px;
            -ms-border-radius: 975px;
            -webkit-border-radius: 975px;
            -moz-border-radius: 975px;
            animation: load-upDown2 1.15s ease infinite;
            -o-animation: load-upDown2 1.15s ease infinite;
            -ms-animation: load-upDown2 1.15s ease infinite;
            -webkit-animation: load-upDown2 1.15s ease infinite;
            -moz-animation: load-upDown2 1.15s ease infinite;
            animation-direction: alternate;
            -o-animation-direction: alternate;
            -ms-animation-direction: alternate;
            -webkit-animation-direction: alternate;
            -moz-animation-direction: alternate;
            animation-delay: 0.29s;
            -o-animation-delay: 0.29s;
            -ms-animation-delay: 0.29s;
            -webkit-animation-delay: 0.29s;
            -moz-animation-delay: 0.29s;
        }
        .load-loading:after, .load-loading:before {
            position: absolute;
            content: '';
            animation: load-upDown 1.15s ease infinite;
            -o-animation: load-upDown 1.15s ease infinite;
            -ms-animation: load-upDown 1.15s ease infinite;
            -webkit-animation: load-upDown 1.15s ease infinite;
            -moz-animation: load-upDown 1.15s ease infinite;
            animation-direction: alternate;
            -o-animation-direction: alternate;
            -ms-animation-direction: alternate;
            -webkit-animation-direction: alternate;
            -moz-animation-direction: alternate;
        }
        .load-loading:before {
            left: -10px;
        }
        .load-loading:after {
            left: 10px;
            animation-delay: 0.58s;
            -o-animation-delay: 0.58s;
            -ms-animation-delay: 0.58s;
            -webkit-animation-delay: 0.58s;
            -moz-animation-delay: 0.58s;
        }

        @keyframes load-upDown {
            from {
                transform: translateY(19px);
            }
            to {
                transform: translateY(-19px);
            }
        }
        @-o-keyframes load-upDown {
            from {
                -o-transform: translateY(19px);
            }
            to {
                -o-transform: translateY(-19px);
            }
        }
        @-ms-keyframes load-upDown {
            from {
                -ms-transform: translateY(19px);
            }
            to {
                -ms-transform: translateY(-19px);
            }
        }
        @-webkit-keyframes load-upDown {
            from {
                -webkit-transform: translateY(19px);
            }
            to {
                -webkit-transform: translateY(-19px);
            }
        }
        @-moz-keyframes load-upDown {
            from {
                -moz-transform: translateY(19px);
            }
            to {
                -moz-transform: translateY(-19px);
            }
        }
        @keyframes load-upDown2 {
            from {
                transform: translateY(29px);
            }
            to {
                transform: translateY(-19px);
            }
        }
        @-o-keyframes load-upDown2 {
            from {
                -o-transform: translateY(29px);
            }
            to {
                -o-transform: translateY(-19px);
            }
        }
        @-ms-keyframes load-upDown2 {
            from {
                -ms-transform: translateY(29px);
            }
            to {
                -ms-transform: translateY(-19px);
            }
        }
        @-webkit-keyframes load-upDown2 {
            from {
                -webkit-transform: translateY(29px);
            }
            to {
                -webkit-transform: translateY(-19px);
            }
        }
        @-moz-keyframes load-upDown2 {
            from {
                -moz-transform: translateY(29px);
            }
            to {
                -moz-transform: translateY(-19px);
            }
        }
    </style>
    <title>PawPrints - Make your mark</title>
</head>
<body>

<div id="wrapper">
{% include 'header.html' %}
<div id="petition-modal" class="hidden">
    <div class="modal">
        <div class="modal-overlay hidden" @click="closePetition()"></div>
        <div class="modal-container hidden">
            <div class="modal-header overflow-hidden material-shadow">
                <h2 class="inline-block text-highlight">{[ petition.title ]}</h2>
                <span class="inline-block">Petition by {[ petition.author ]}</span>
                <div id="petition-close" class="inline-block right padding" @click="closePetition()"><span class="material-icon-container"><i class="material-icons">close</i></span></div>
            </div>
            <div class="modal-body relative block">
                <div id="timeline-container">
                    <div class="timeline-element material-shadow animated zoomIn relative" v-for="(element, index) in timeline" v-bind:key="index" :data-type="element.type">
                        <div class="timeline-element-wrap">
                            <div class="timeline-element-arrow-container">
                                <div class="timeline-element-arrow" v-if="element.type != 'created'"></div>
                                <div class="timeline-element-dot circle"></div>
                            </div>
                            <div class="timeline-element-body" v-if="element.type != 'created'">
                                <h4 class="timeline-element-header"><span class="text-highlight">{[ element.type ]}</span><span v-if="element.date==0">Today</span><span v-else>{[ element.date ]} Day<span v-if="element.date>1">s</span> Ago</span></h4>
                                <div class="timeline-element-content" v-html="element.content"></div>
                            </div>
                            <div class="timeline-element-body" style="padding-top:14px;" v-else>
                                <span> Created by {[ element.author ]} on {[ petition.timestamp ]}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer overflow-hidden relative material-shadow transition" data-hidden="false">
                <!-- This section changes based on the state the petition is in. -->
                <!-- Petition is in progress, show the progress tracking and sharing features. -->
                <div id="petition-actions" class="overflow-hidden">
                    <div v-if="petition.status == 1">
                        <div id="signature-card" class="petition-action-card left margin-left">
                            <button id="sign-petition-button" class="material material-button material-shadow transition" :disabled="petition.expired || petition.response || petition.isSigned || '{{ user.first_name }}' == '' {% if user.profile %} || ({{ user.profile.has_access }} !== 1){% endif %}">
                                <!-- You must be logged in to sign a petition -->   <span onclick="window.location.href = '/login/?next=/?p='+getUrl('p')" class="cursor" v-if="'{{ user.first_name }}' == ''">Log in to sign this petition</span>
                                {% if user.profile %}
                                    <!-- You cannot sign a petition if ur not a student --> <span v-else-if="({{ user.profile.has_access }} !== 1)">You may not sign petitions</span>
                                {% endif %}
                                <!-- You you have already signed the petition -->   <span v-else-if="petition.isSigned">You have signed this petition</span>
                                <!-- You cannot sign a petition with a response --> <span v-else-if="petition.response">This petition has received a response</span>
                                <!-- You cannot sign an expired petition -->        <span v-else-if="petition.expired">This petition has expired</span>
                                <!-- You may sign the petition -->                  <span v-else>Sign This Petition</span>
                            </button>
                            <span class="padding-left">{[ petition.signatures ]} / 200 Signatures</span>
                        </div>
                        <div id="action-drawer-icon-container" class="transition">
                            <i class="material-icons">keyboard_arrow_down</i>
                        </div>
                        {% if user.first_name and user.is_staff %}
                            <div id="admin-actions">
                                <div v-if="!petition.in_progress && !petition.response" class="circle material-shadow material-hover cursor transition left" data-admin-control="mark_in_progress">
                                    <i class="material-icons">check</i>
                                    <span class="invisible transition">Charged</span>
                                </div>
                                <div v-else class="admin-action-spacer"></div>
                                <div class="circle material-shadow material-hover cursor transition left" data-admin-control="update">
                                    <i class="material-icons">update</i>
                                    <span class="invisible transition">Update</span>
                                </div>
                                <div class="circle material-shadow material-hover cursor transition left" data-admin-control="respond">
                                    <i class="material-icons">chat</i>
                                    <span class="invisible transition">Respond</span>
                                </div>
                                <div class="circle material-shadow material-hover cursor transition left" data-admin-control="delete">
                                    <i class="material-icons">delete</i>
                                    <span class="invisible transition">Delete</span>
                                </div>
                            </div>
                        {% endif %}
                        <div id="action-cards" class="block overflow-hidden right">
                            <div id="social-share" class="right overflow-hidden transition petition-action-card">
                                <h3>Share</h3>
                                <div class="left material-icon-container social-icon" v-for="icon in social" ><a :href="icon.link+petition.id" target="_blank"><img :src="icon.imgURL" :alt="icon.name" :title="icon.name" /></a></div>
                            </div>
                            <div class="petition-action-card margin-right padding-right right">
                                <h3>Expires</h3>
                                <span class="alternate-font">{[ petition.expires ]}</span>
                            </div>
                            <div class="petition-action-card margin-right padding-right right">
                                <h3>Submitted</h3>
                                <span class="alternate-font">{[ petition.timestamp ]}</span>
                            </div>
                            <div class="petition-action-card margin-right padding-right right">
                                <h3>Status</h3>
                                <span class="alternate-font" v-if="petition.signatures < 200 && !petition.in_progress && !petition.response && !petition.expired">Active</span>
                                <span class="alternate-font" v-else-if="petition.response">Responded</span>
                                <span class="alternate-font" v-else-if="petition.in_progress">In Progress</span>
                                <span class="alternate-font" v-else-if="petition.expired">Expired</span>
                                <span class="alternate-font" v-else>In Progress</span>
                            </div>
                            <div class="petition-action-card margin-right padding-right right">
                                <h3>Discuss</h3>
                                <span class="alternate-font">On <a class="text-highlight" :href="'https://www.facebook.com/sharer.php?u=https://pawprints.rit.edu/?p='+petition.id">Facebook</a></span>
                            </div>
                        </div>
                        <progress class="petition-progress" max="200" :value="petition.signatures"></progress>
                    </div>
                    <div v-else-if="petition.status == 0">
                        <div class="ninety-width">
                            <div class="padding-bottom">You are previewing this petition</div>
                            <button id="edit-button" onclick="window.location.href='/petition/'+getUrl('p')" class="material material-button material-shadow transition left minimal">Still Need Work? Edit it.</button>
                            <button id="publish-button" class="material material-button material-shadow transition left">Look good? Publish it!</button>
                        </div>
                    </div>
                </div>
                <!-- End Petition in progress features. -->

            </div>
        </div>
    </div>
</div>

<main class="full-width">

    <a id="landing-marker"></a>
    <section id="landing" class="parallax-container">
        <div id="parallax-slideshow" class="full-width">
            <div class="slideshow-container">
                <div v-for="(image, index) in images" v-if="index < limit || limit == 0" :id="id_pre+(index+1)" class="slide full-width" :data-backgroundimage="image.url"></div>
            </div>
        </div>
        <div id="parallax-overlay" class="full-width">
            <h1>Make Your Mark</h1>
            <h3>Create and sign petitions.<br />Receive official responses from Student Government.</h3>
            <label id="search-container" for="search-term" class="full-width cursor">
                <div class="material-icon-container">
                    <i class="material-icons">search</i>
                    <input id='search-term' v-model="searchString" @keyup="search" class="material-input" type="text" />
                    <span class="">Search Petitions</span>
                </div>
            </label>
        </div>
    </section>

    <section id="sub-landing" class="relative">

        <nav id="filter-sort" class="left attach" data-top="91" data-left="0">
            <div id="filter-sort-content-box">
                <h3 class="filter-sort-title">Sort By:</h3>
                <select id="sort" data-filter="all" class="material-shadow material-hover cursor transition">
                    <optgroup label="Sort By">
                        <option value="most recent" selected="selected">Active</option>
                        <option value="last signed">Last Signed</option>
                        <option value="in progress">In Progress</option>
                        <option value="responded">Responded</option>
                        <option value="most signatures">Most Signatures</option>
                        <option value="archived">Expired</option>
                    </optgroup>
                </select>
                <h3 class="filter-sort-title">Filter By Tag:</h3>
                <ul class="list full-width">
                    <li id="tag-all" data-tag="all" class="list-item tag current-tag">All</li>
                    {% for tag in tags %}
                        <li id="tag-{{ tag.id }}" data-tag="{{ tag.id }}" class="list-item tag transition">{{ tag.name }}</li>
                    {% endfor %}
                </ul>
                <select id="mobile-filter" class="material-shadow material-hover cursor transition">
                    <optgroup label="Filter By">
                        <option value="all">All</option>
                        {% for tag in tags %}
                            <option value="{{ tag.id }}">{{ tag.name }}</option>
                        {% endfor %}
                    </optgroup>
                </select>
            </div>
        </nav>

        <div id="petitions" class="right">
            <div v-if="loading" id="loading-petitions">
                <div class="load-container">
                    <ul class="load-flex-container">
                        <li>
                            <span class="load-loading"></span>
                        </li>
                    </ul>
                </div>
                Loading Petitions...
            </div>
            <div class="block padding text-center" v-if="list.length == 0 && !loading">
                <span class="padding-top">No petitions fit that query!</span>
            </div>
            <div v-if="list.length > 0" id="petitions-container">
                <article v-for="petition in list" v-if="!petition.deleted" v-bind:class="[petition.response ? 'responded ' : petition.in_progress ? 'in-progress ' : ''] + 'petition material-shadow material-hover transition'" :data-petition-id="petition.id">
                    <progress class="petition-progress" max="200" :value="petition.signatures"></progress>
                    <div class="petition-body">
                        <h4 class="petition-signatures">
                            {[ petition.signatures ]}
                            <span v-if="petition.signatures == 1"> Signature</span>
                            <span v-else> Signatures</span>
                            <span v-if="petition.isSigned"> | <span class="bold">Signed</span></span>
                            <span v-if="petition.response" class="right">Responded</span>
                            <span v-else-if="petition.updates.length > 0" class="right">Updated</span>
                            <span v-else-if="petition.in_progress" class="right">In Progress</span>
                            <!--<span class="right">-->
                                <!--<i v-if="petition.response" class="status-icon material-icons md-18" title="This petition has received an official response.">done</i>-->
                                <!--<i v-else-if="petition.updates.length > 0" class="status-icon material-icons md-18" title="This petition has been updated by a SG senator.">message</i>-->
                                <!--<i v-else-if="petition.in_progress" class="status-icon material-icons md-18" title="This petition has been marked as in progress by a SG senator.">chat_bubble_outline</i>-->
                            <!--</span>-->
                            <!-- Signature icon by Icons8 -->
                            <!--<img v-if="petition.isSigned" src="https://png.icons8.com/signature/ios7/64" title="You signed this petition" alt="You signed this petition" width="27" height="27" class="right" style="margin-top: -6px">-->
                        </h4>
                        <h3 class="petition-title"><a class="text-highlight modern-link" :data-petition-id="petition.id">{[ petition.title ]}</a></h3>
                        <ul>
                            <li v-for="tag in petition.tags" :data-tag="tag.id" class="tag material-shadow transition">{[ tag.name ]}</li>
                        </ul>
                    </div>
                </article>
            </div>
        </div>

    </section>

</main>

{% if user.first_name and user.profile.has_access == 1 %}
    <button id="new-petition" class="cursor circle background-highlight bright-text light material-hover transition"><span class="material-icon-container"><i class="material-icons">add</i></span></button>
    <script>
        $(document).ready(function(){
            $("#new-petition").click(function(){
                $.post("/petition/create/",{"csrfmiddlewaretoken":get_csrf()},function(r){
                    var petition = Number(r);
                    if(!isNaN(petition)){
                        window.location.href = "/petition/"+petition;
                    }
                });
            });
        });
    </script>
{% else %}
    <script>
        $(document).ready(function(){
            $("#back-up").css({"bottom":"42.5px"});
        });
    </script>
{% endif %}
{% if user.is_staff %}
    <script>
        if(getUrl("dev")){
            $("#timeline-container").css({"border":"3px solid black"});
        }

        $(document).on("click","#admin-actions .circle",function(e){
            if(window.debug)console.log("CLICK ADMIN BUTTON");
            var clicked = $(e.target).closest(".circle");
            var action = clicked.data("admin-control");
            function initTinyMCE(){
                return tinymce.init({
                    selector: '#admin-edit',
                    inline: false,
                    menubar: false,
                    plugins: "link",
                    height: 300,
                    toolbar: "insert | undo redo | styleselect | bold italic backcolor  | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link removeformat"
                });
            }
            switch(action){
                case "update":
                    function updateLaunch(){
                        // Build the update modal
                        window.updateModal = new Modal({
                            icon: false,
                            headerClass:"background-highlight bright-text",
                            headerContent: "<h2>Add Update</h2>",
                            bodyContent:"<div id='admin-edit'>Write your update here.</div> <h5> Note: Once you submit this update you may not change it. </h5>",
                            bodyButtons:[
                                ["Cancel","material-button material-hover material-shadow cursor transition minimal","window.updateModal.close()"],
                                ["Submit","material-button material-hover material-shadow cursor transition",'update("add_update",tinymce.get("admin-edit").getContent(),getUrl("p"),function(r){window.updateModal.close();})']
                            ],
                            closeCallback: function(){
                                tinymce.remove("#admin-edit");
                            }
                        });
                        updateModal.open();
                        initTinyMCE();
                        setTimeout(function(){
                            updateModal.positionModal();
                        },0);
                        return true;
                    }
                    return updateLaunch();
                case "respond":
                    function responseLaunch(){
                        // Build the update modal
                        window.responseModal = new Modal({
                            icon: false,
                            headerClass:"background-highlight bright-text",
                            headerContent: "<h2>Respond to this petition</h2>",
                            bodyContent:"<div id='admin-edit'>Write your response here.</div><h5> Note: Once you submit this response you may not change it. </h5>",
                            bodyButtons:[
                                ["Cancel","material-button material-hover material-shadow cursor transition minimal","window.responseModal.close()"],
                                ["Submit","material-button material-hover material-shadow cursor transition",'update("response",tinymce.get("admin-edit").getContent(),getUrl("p"),function(r){window.responseModal.close();})']
                            ],
                            closeCallback: function(){
                                tinymce.remove("#admin-edit");
                            }
                        });
                        responseModal.open();
                        return initTinyMCE();
                    }
                    return responseLaunch();
                case "delete":
                    function deleteLaunch(){
                        // Build the update modal
                        window.deleteModal = new Modal({
                            icon: false,
                            headerClass:"background-highlight bright-text",
                            headerContent: "<h2>Un-publish this petition.</h2>",
                            bodyContent:"<p>WARNING! There is no going back once you remove this petition.</p>",
                            bodyButtons:[
                                ["Cancel","material-button material-hover material-shadow cursor transition minimal","window.deleteModal.close()"],
                                ["Submit","material-button material-hover material-shadow cursor transition",'update("unpublish",false,getUrl("p"),function(r){window.deleteModal.close();$("#petitions-container").find("[data-petition-id="+getUrl("p")+"]").remove();window.modalData.closePetition();})']
                            ],
                            closeCallback: function(){
                                tinymce.remove("#admin-edit");
                            }
                        });
                        deleteModal.open();
                        return initTinyMCE();
                    }
                    return deleteLaunch();
                case "mark_in_progress":
                    update("mark-in-progress",false,getUrl("p"));
                    return true;
                default:
                    throw "Error when dispatching an admin control action.";
            }
        });
    </script>
{% endif %}

<a id="back-up" href="#landing-marker" class="padding circle transition material-shadow material-hover"><span class="material-icon-container"><i class="material-icons">expand_less</i></span></a>
</div>
{% csrf_token %}
</body>
<script>

    window.debug = false;

    /* Initialize the Vue.js wrappers for the page.
     *     el: the element to initialize on.
     *   data:
     *      - list: the list of petitions and all of their data
     *      - map: the mapping of a petitions ID to its index in the list of petitions.
     */
    /**
     * "petitions" holds all of the data for all petitions.
     **/
    var petitions = new Vue({
        el: "#petitions",
        data: {
            loading: true,
            list: [],
            map: {}
        },
        delimiters: ['{[', ']}']
    });
    var url = "pawprints.rit.edu/";
    /**
     * "modalData" defines the state for the modal popup.
     * Social buttons may be added / configured here.
     **/
    var modalData = new Vue({
        el: "#petition-modal",
        data:{
            petition: {},
            timeline:[],
            social:[
                {
                    name: "FaceBook",
                    imgURL:"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjMycHgiIGhlaWdodD0iMzJweCIgdmlld0JveD0iMCAwIDQzMC4xMTMgNDMwLjExNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDMwLjExMyA0MzAuMTE0OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPHBhdGggaWQ9IkZhY2Vib29rIiBkPSJNMTU4LjA4MSw4My4zYzAsMTAuODM5LDAsNTkuMjE4LDAsNTkuMjE4aC00My4zODV2NzIuNDEyaDQzLjM4NXYyMTUuMTgzaDg5LjEyMlYyMTQuOTM2aDU5LjgwNSAgIGMwLDAsNS42MDEtMzQuNzIxLDguMzE2LTcyLjY4NWMtNy43ODQsMC02Ny43ODQsMC02Ny43ODQsMHMwLTQyLjEyNywwLTQ5LjUxMWMwLTcuNCw5LjcxNy0xNy4zNTQsMTkuMzIxLTE3LjM1NCAgIGM5LjU4NiwwLDI5LjgxOCwwLDQ4LjU1NywwYzAtOS44NTksMC00My45MjQsMC03NS4zODVjLTI1LjAxNiwwLTUzLjQ3NiwwLTY2LjAyMSwwQzE1NS44NzgtMC4wMDQsMTU4LjA4MSw3Mi40OCwxNTguMDgxLDgzLjN6IiBmaWxsPSIjMDAwMDAwIi8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==",
                    link: "https://www.facebook.com/sharer.php?u=https://"+url+"?p="
                },
                {
                    name: "Twitter",
                    imgURL:"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjMycHgiIGhlaWdodD0iMzJweCIgdmlld0JveD0iMCAwIDQzMC4xMTcgNDMwLjExNyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDMwLjExNyA0MzAuMTE3OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPHBhdGggaWQ9IlR3aXR0ZXJfX3gyOF9hbHRfeDI5XyIgZD0iTTM4MS4zODQsMTk4LjYzOWMyNC4xNTctMS45OTMsNDAuNTQzLTEyLjk3NSw0Ni44NDktMjcuODc2ICAgYy04LjcxNCw1LjM1My0zNS43NjQsMTEuMTg5LTUwLjcwMyw1LjYzMWMtMC43MzItMy41MS0xLjU1LTYuODQ0LTIuMzUzLTkuODU0Yy0xMS4zODMtNDEuNzk4LTUwLjM1Ny03NS40NzItOTEuMTk0LTcxLjQwNCAgIGMzLjMwNC0xLjMzNCw2LjY1NS0yLjU3Niw5Ljk5Ni0zLjY5MWM0LjQ5NS0xLjYxLDMwLjg2OC01LjkwMSwyNi43MTUtMTUuMjFjLTMuNS04LjE4OC0zNS43MjIsNi4xODgtNDEuNzg5LDguMDY3ICAgYzguMDA5LTMuMDEyLDIxLjI1NC04LjE5MywyMi42NzMtMTcuMzk2Yy0xMi4yNywxLjY4My0yNC4zMTUsNy40ODQtMzMuNjIyLDE1LjkxOWMzLjM2LTMuNjE3LDUuOTA5LTguMDI1LDYuNDUtMTIuNzY5ICAgQzI0MS42OCw5MC45NjMsMjIyLjU2MywxMzMuMTEzLDIwNy4wOTIsMTc0Yy0xMi4xNDgtMTEuNzczLTIyLjkxNS0yMS4wNDQtMzIuNTc0LTI2LjE5MiAgIGMtMjcuMDk3LTE0LjUzMS01OS40OTYtMjkuNjkyLTExMC4zNTUtNDguNTcyYy0xLjU2MSwxNi44MjcsOC4zMjIsMzkuMjAxLDM2LjgsNTQuMDhjLTYuMTctMC44MjYtMTcuNDUzLDEuMDE3LTI2LjQ3NywzLjE3OCAgIGMzLjY3NSwxOS4yNzcsMTUuNjc3LDM1LjE1OSw0OC4xNjksNDIuODM5Yy0xNC44NDksMC45OC0yMi41MjMsNC4zNTktMjkuNDc4LDExLjY0MmM2Ljc2MywxMy40MDcsMjMuMjY2LDI5LjE4Niw1Mi45NTMsMjUuOTQ3ICAgYy0zMy4wMDYsMTQuMjI2LTEzLjQ1OCw0MC41NzEsMTMuMzk5LDM2LjY0MkMxMTMuNzEzLDMyMC44ODcsNDEuNDc5LDMxNy40MDksMCwyNzcuODI4ICAgYzEwOC4yOTksMTQ3LjU3MiwzNDMuNzE2LDg3LjI3NCwzNzguNzk5LTU0Ljg2NmMyNi4yODUsMC4yMjQsNDEuNzM3LTkuMTA1LDUxLjMxOC0xOS4zOSAgIEM0MTQuOTczLDIwNi4xNDIsMzkzLjAyMywyMDMuNDg2LDM4MS4zODQsMTk4LjYzOXoiIGZpbGw9IiMwMDAwMDAiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K",
                    link: "https://twitter.com/intent/tweet?text=&via=&hashtags=&url=https://"+url+"?p="
                },
                {
                    name: "Reddit",
                    imgURL:"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjMycHgiIGhlaWdodD0iMzJweCIgdmlld0JveD0iMCAwIDQzMC4xMTcgNDMwLjExNyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDMwLjExNyA0MzAuMTE3OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPHBhdGggaWQ9InJlZGRpdCIgZD0iTTMwNy41MjMsMjMxLjA2MmMxLjExLDIuODM4LDEuNjE0LDUuNzY5LDEuNjE0LDguNjgxYzAsNS44NjItMi4wMjUsMTEuNTU2LTUuNDIzLDE2LjIwNCAgIGMtMy4zNiw0LjU5My04LjEyMSw4LjE1OC0xMy43MjIsOS43MjdoMC4wMWMtMC4wNDcsMC4wMTktMC4wOTQsMC4wMTktMC4xMTcsMC4wMzdjLTAuMDIzLDAtMC4wNjEsMC4wMTktMC4wNzksMC4wMTkgICBjLTIuNjIzLDAuODk2LTUuMzEyLDEuMzE2LTcuOTgsMS4zMTZjLTYuMjU0LDAtMTIuMzk2LTIuMjU0LTE3LjMwNi02LjA5NmMtNC44NzItMy44MjYtOC41Ni05LjMyNC05LjcxNy0xNS44NDVoLTAuMDEgICBjMC0wLjAxOSwwLTAuMDQyLTAuMDA5LTAuMDY5YzAtMC4wMTksMC0wLjAzOC0wLjAxOS0wLjA2NWgwLjAxOWMtMC4zNjQtMS42ODEtMC41NTEtMy4zNi0wLjU1MS01LjAyMSAgIGMwLTUuNjQ3LDEuOTIzLTExLjA3LDUuMDk3LTE1LjU1MWMzLjE2NC00LjQ1Myw3LjYyNi03Ljk5LDEyLjg0OC05LjgxMWMwLjAxOSwwLDAuMDM4LTAuMDEsMC4wMzgtMC4wMSAgIGMwLjAyNywwLDAuMDI3LTAuMDI3LDAuMDUxLTAuMDI3YzIuOTU0LTEuMDkyLDYuMDcyLTEuNjM5LDkuMTU3LTEuNjM5YzUuNjE5LDAsMTEuMTU0LDEuNzA0LDE1LjgyMSw0LjgyMSAgIGM0LjYxMSwzLjA2Niw4LjM1NCw3LjU2MSwxMC4yMywxMy4xNDNjMC4wMTksMC4wMzcsMC4wMTksMC4wNywwLjAzNywwLjEwM2MwLDAuMDM3LDAuMDE5LDAuMDU3LDAuMDM3LDAuMDg0SDMwNy41MjN6ICAgIE0yOTAuMzI5LDMwMC4zNDljLTIuMjAyLTEuNDI4LTQuNzUxLTIuMjkxLTcuNDQ4LTIuMjkxYy0yLjE3NSwwLTQuNDM0LDAuNjIxLTYuNDQ1LDEuOTU1bDAsMCAgIGMtMTkuMDA0LDExLjM0Mi00MS4zNTUsMTcuNTU4LTYzLjU0NywxNy41NThjLTE2LjY1LDAtMzMuMTk5LTMuNTE0LTQ4LjE5Mi0xMC44NzlsLTAuMDc3LTAuMDM3bC0wLjA3NS0wLjAyOCAgIGMtMi4yNjEtMC45MjQtNC44MzctMi44ODktNy42NDctNC43NmMtMS40MjgtMC45MjUtMi45MTktMS44NDQtNC41NzQtMi41MjFjLTEuNjMzLTAuNjk1LTMuNDQ3LTEuMTgxLTUuMzg2LTEuMTgxICAgYy0xLjYwNSwwLTMuMjkyLDAuMzU5LTQuOTU3LDEuMTE1Yy0wLjA4NiwwLjAzMy0wLjE2OCwwLjA2NS0wLjI1MiwwLjA5OGgwLjAwOWMtMi42MTYsMC45OTktNC42NiwyLjgyOS01Ljk3NCw0Ljk5NCAgIGMtMS4zNzIsMi4yMy0yLjA0Niw0LjgyNi0yLjA0Niw3LjQxMWMwLDIuMzM0LDAuNTUxLDQuNjY3LDEuNjkxLDYuNzg2YzEuMDg1LDIuMDA3LDIuNzU0LDMuNzYyLDQuOTM4LDQuOTM4ICAgYzIxLjQyOSwxNC40NTQsNDYuNjYyLDIxLjAwMiw3MS45OTIsMjAuOTc5YzIyLjgzOCwwLDQ1LjgxNC01LjI4Nyw2Ni4yNy0xNC45MTFsMC4xMDctMC4wNjVsMC4xMDMtMC4wNTYgICBjMi42OTctMS41OTcsNi4yODItMy4wMjksOS42NjEtNS4xMTVjMS42NzEtMS4wNjQsMy4zMDQtMi4yOTYsNC43MDQtMy44OTdjMS40LTEuNTkxLDIuNTI1LTMuNTUxLDMuMTYtNS44NzV2LTAuMDEgICBjMC4yNjYtMS4wMjYsMC4zOTItMi4wMjUsMC4zOTItMy4wMjRjMC0xLjg5OS0wLjQ2Ny0zLjcwMS0xLjI0MS01LjMyQzI5NC4zNjEsMzAzLjc3NSwyOTIuNTA0LDMwMS43NzgsMjkwLjMyOSwzMDAuMzQ5eiAgICBNMTM5Ljg3NSwyNjUuNTg5YzAuMDM3LDAsMC4wODYsMC4wMTQsMC4xMjgsMC4wMzdjMi43MzUsMC45OTksNS41NTQsMS40OTMsOC4zNDUsMS40OTNjNi45NjMsMCwxMy43My0yLjg1MiwxOC44NTMtNy41ICAgYzUuMTE1LTQuNjYyLDguNjE4LTExLjI1Nyw4LjYxOC0xOC43NzVjMC0wLjE5NiwwLTAuMzkyLTAuMDA5LTAuNjI1YzAuMDE5LTAuMzM2LDAuMDI4LTAuNzA1LDAuMDI4LTEuMDgzICAgYzAtNy40NTgtMy40NTYtMTQuMDgtOC41MjItMTguNzYyYy01LjA4NS00LjY4Ni0xMS44MzYtNy41NTEtMTguODI1LTcuNTUxYy0xLjg2NywwLTMuNzY5LDAuMjE5LTUuNjI4LDAuNjUzICAgYy0wLjAyOCwwLTAuMDQ5LDAuMDA5LTAuMDc3LDAuMDA5YzAsMC0wLjAxOSwwLTAuMDI4LDBjLTkuMjUyLDEuOTM3LTE3LjM3Myw4LjgwMy0yMC4zNywxOC4yNDhsMCwwdjAuMDEgICBjMCwwLjAxOS0wLjAwOSwwLjAzNy0wLjAwOSwwLjAzN2MtMC44NjEsMi41ODYtMS4yNjIsNS4yNTUtMS4yNjIsNy44OTZjMCw1Ljc4NywxLjkxMywxMS40MjYsNS4yMTEsMTYuMDY0ICAgYzMuMjY5LDQuNTYsNy44OTQsOC4xNDUsMTMuNDQ4LDkuODE5QzEzOS44MTYsMjY1LjU2MSwxMzkuODM1LDI2NS41NzEsMTM5Ljg3NSwyNjUuNTg5eiBNNDMwLjAzMywxOTguMDk0djAuMDM4ICAgYzAuMDY2LDAuOTQsMC4wODQsMS44NzgsMC4wODQsMi44MWMwLDEwLjQ0Ny0zLjM1MSwyMC40OTMtOC45NDEsMjkuMDE2Yy01LjIxOCw3Ljk3Ni0xMi40MTQsMTQuNjQ5LTIwLjcwMywxOS4xNzcgICBjMC41MzIsNC4xNTgsMC44NCw4LjM0OSwwLjg0LDEyLjUyNmMtMC4wMSwyMi40OTUtNy43NjYsNDQuNjA3LTIxLjI3Miw2Mi4zMjl2MC4wMDloLTAuMDI4ICAgYy0yNC45NjksMzMuMjE2LTYzLjMxMyw1Mi44MDQtMTAyLjAzMSw2Mi42ODRoLTAuMDFsLTAuMDI3LDAuMDIzYy0yMC42NDcsNS4wMTMtNDEuOTM4LDcuNTc0LTYzLjIyMyw3LjU3NCAgIGMtMzEuNzI5LDAtNjMuNDMzLTUuNzIyLTkzLjAxOC0xNy41ODVsLTAuMDA5LTAuMDI4aC0wLjAyOGMtMzAuNjcyLTEyLjY0My01OS44OTctMzIuNzM5LTc3LjgxOS02Mi4xODQgICBjLTkuNjQyLTE1LjcxLTE0LjkzNS0zNC4xNDEtMTQuOTM1LTUyLjY1OWMwLTQuMTksMC4yODMtOC4zODcsMC44NDMtMTIuNTM2Yy04LjA3Mi00LjU0NS0xNS4wNjMtMTAuOTktMjAuMjU1LTE4LjY4NyAgIGMtNS41NDItOC4yNjYtOS4wNTYtMTcuOTUtOS41LTI4LjE4N3YtMC4wNHYtMC4wMzd2LTAuMDgyYzAuMDA5LTE0LjMzNyw2LjIzNy0yNy45MTgsMTUuOTE1LTM3LjkzMiAgIGM5LjY3Ny0xMC4wMTEsMjIuODk2LTE2LjU1NCwzNy4wNzUtMTYuNTU0YzAuMTk2LDAsMC4zOTIsMCwwLjU4OCwwYzEuNDg3LTAuMTAxLDIuOTg3LTAuMTU5LDQuNDg4LTAuMTU5ICAgYzcuMTIyLDAsMTQuMjYsMS4xNTMsMjEuMDM5LDMuNzUybDAuMDM3LDAuMDI4bDAuMDM4LDAuMDEyYzUuNzg3LDIuNDM3LDExLjUzNyw1LjM3NywxNi42NjIsOS40NDkgICBjMS42NjEtMC44NzEsMy40NzItMS44NTEsNS41MDQtMi42MjVjMzEuMDY0LTE4LjM5NSw2Ny4xNzEtMjUuNDkxLDEwMi4zNTgtMjcuNTM4YzAuMzA2LTE3LjQzMSwyLjQ0OC0zNS42OCwxMC45NDktNTEuNjUgICBjNy4wOC0xMy4yNjksMTkuMzY5LTIzLjU5OSwzNC0yNy4xNzlsMC4wNjEtMC4wM2wwLjA3OS0wLjAwOWM1LjU3My0xLjA3OCwxMS4xOTItMS41NzUsMTYuNzc0LTEuNTc1ICAgYzE0Ljg2OSwwLDI5LjU2MSwzLjUyMSw0My4zMSw5LjAxN2M2LjA4Ni05LjE4NSwxNC43NzYtMTYuMzU0LDI0Ljk3LTIwLjM3NWwwLjA5OC0wLjA1NmwwLjA5OC0wLjAzNyAgIGM1Ljk4My0xLjg2NCwxMi4zMDMtMi45NTQsMTguNjQ2LTIuOTU0YzYuNjkyLDAsMTMuNDM3LDEuMjIzLDE5Ljc1Niw0LjA0NnYtMC4wMjNjMC4wMDksMC4wMjMsMC4wMTksMC4wMjMsMC4wMTksMC4wMjMgICBjMC4wNDcsMC4wMTYsMC4wODQsMC4wNDQsMC4xMTYsMC4wNDRjOS4wNTksMy40ODksMTYuNzI3LDkuOTM3LDIyLjE2NCwxNy45NWM1LjQ0Miw4LjA0OCw4LjY0NCwxNy42ODgsOC42NDQsMjcuNTk5ICAgYzAsMS44MjctMC4xMDMsMy42NTctMC4zMTcsNS40ODlsLTAuMDE5LDAuMDM3YzAsMC4wMjgsMCwwLjA2OC0wLjAxLDAuMDk2Yy0xLjA2MywxMi44MDktNy41NTEsMjQuMDQ3LTE2LjczNiwzMi4wNjMgICBjLTkuMjQsOC4wNDgtMjEuMjA3LDEyLjkwOS0zMy40OSwxMi45MDljLTEuOTcsMC0zLjk1OC0wLjExLTUuOTM3LTAuMzc0Yy0xMi4xODItMC45MzEtMjMuNTQxLTYuODI2LTMxLjg4Ni0xNS41OTUgICBjLTguMzczLTguNzU1LTEzLjc2OC0yMC40NTMtMTMuNzY4LTMzLjA4YzAtMC42MTEsMC4wNTYtMS4yMzcsMC4wNzQtMS44NDNjLTExLjQzNS01LjA5Mi0yMy41NzgtOS4zMTYtMzUuNjQ2LTkuMzA2ICAgYy0xLjc0NiwwLTMuNDkxLDAuMDk2LTUuMjM3LDAuMjczaC0wLjAxOWMtOS4wMzUsMC44NzEtMTcuNDM2LDYuNTY2LTIxLjUwNiwxNC43NTd2MC4wMDl2MC4wMjggICBjLTYuMTc5LDEyLjAzNC03LjQxMSwyNi4xMDEtNy41OTgsNDAuMDY0YzM0LjYzOSwyLjI1OSw2OS40ODMsMTAuNTcxLDEwMC4wNDMsMjguMTM4aDAuMDQ3bDAuNDM4LDAuMjU5ICAgYzAuNTc5LDAuMzQzLDEuNjUyLDAuOTMxLDIuNjIzLDEuNDQ5YzIuMTAxLTEuNzA0LDQuMzIyLTMuNDU2LDYuODU2LTQuOTY2YzkuMjY0LTYuMTcsMjAuMjQxLTkuMjM4LDMxLjIyMy05LjIzOCAgIGM0Ljg3MiwwLDkuNzQ5LDAuNjIxLDE0LjQ4MSwxLjgzNGgwLjAxOWwwLjE5NiwwLjA1OGMwLjA3LDAuMDEsMC4xMjEsMC4wMzMsMC4xNzgsMC4wMzN2MC4wMDkgICBjMTEuMTgzLDIuODQ1LDIxLjMsOS4yNjcsMjguOTE3LDE3LjkyN2M3LjYxMiw4LjY3NCwxMi43MzEsMTkuNjQ4LDEzLjczLDMxLjU2MXYwLjAyNUg0MzAuMDMzeiBNMzI4LjAwMiw4NC43MzMgICBjMCwwLjQ2OSwwLjAxLDAuOTUsMC4wNTcsMS40NHYwLjAyOHYwLjA1NmMwLjIyNCw2LjAxOCwzLjA2NSwxMS42MTksNy4zODMsMTUuNzU2YzQuMzQsNC4xNCwxMC4xLDYuNzAyLDE1Ljk0Miw2LjcyNWgwLjA4aDAuMDc5ICAgYzAuNDIsMC4wMzMsMC44NSwwLjAzMywxLjI2LDAuMDMzYzUuODk5LDAuMDA5LDExLjc1Mi0yLjUzMiwxNi4xNDgtNi42NTVjNC40MDUtNC4xNDQsNy4zMDktOS43OCw3LjU0Mi0xNS44NDlsMC4wMDktMC4wMjh2LTAuMDM3ICAgYzAuMDM4LTAuNDY0LDAuMDU3LTAuOTAzLDAuMDU3LTEuMzc3YzAtNi4yNDctMi45MjItMTIuMjAyLTcuNDk2LTE2LjYxMmMtNC41NTUtNC40MDYtMTAuNjg4LTcuMTM2LTE2LjczNS03LjEyICAgYy0xLjk1MSwwLTMuODg0LDAuMjY2LTUuNzc4LDAuODU0bC0wLjA2NSwwLjAwNWwtMC4wNTYsMC4wMjNjLTQuOTg0LDEuMjk1LTkuNjU2LDQuMzY4LTEzLjAxMiw4LjQ0OSAgIEMzMzAuMDQ2LDc0LjQ4NiwzMjguMDAyLDc5LjUwOCwzMjguMDAyLDg0LjczM3ogTTcyLjMxMiwxNzcuNTc4Yy00LjYzLTIuMTU2LTkuNDE4LTMuNjk2LTE0LjE1LTMuNjc2ICAgYy0wLjc5NCwwLTEuNTk3LDAuMDQ3LTIuMzksMC4xMzNoLTAuMTFsLTAuMTEsMC4wMTRjLTYuNzk1LDAuMTg3LTEzLjY1MywzLjE1LTE4LjgwMSw3Ljg5OSAgIGMtNS4xNTIsNC43MzItOC41NTksMTEuMTIyLTguODIxLDE4LjE2N3YwLjA2NWwtMC4wMTIsMC4wNThjLTAuMDQ2LDAuNTctMC4wNjUsMS4xMzctMC4wNjUsMS42ODMgICBjMCw0LjM0NSwxLjMzMyw4LjU0NSwzLjU5MywxMi4zNjhjMS42NzMsMi44NDcsMy44NjcsNS40NDEsNi4zNDgsNy43MDFDNDUuNzM1LDIwNC42MDIsNTguMTQyLDE4OS44NDUsNzIuMzEyLDE3Ny41Nzh6ICAgIE0zNzQuMDY2LDI2Mi42MzVjMC0xNS41LTUuNTkyLTMxLjA2OS0xNC42NDYtNDMuNjA0Yy0xOC4wNTMtMjUuMTE5LTQ2LjA1NS00MS41MDItNzUuMTg3LTUwLjYzNmwtMC4yMDUtMC4wNzIgICBjLTUuNTkyLTEuNzE1LTExLjIzOC0zLjIzNC0xNi45MzMtNC41MzRjLTE3LjAyNS0zLjg3Ni0zNC40OC01LjgwNi01MS45MTctNS44MDZjLTIzLjQxNCwwLTQ2LjgyNywzLjQ2NS02OS4yNDUsMTAuMzc5ICAgYy0yOS4xMjUsOS4yNDMtNTcuMjIxLDI1LjUxLTc1LjIzMyw1MC43MXYwLjAxOWMtOS4xMjksMTIuNTg3LTE0LjQ3NSwyOC4yMDgtMTQuNDc1LDQzLjc2M2MwLDUuNzI3LDAuNzE2LDExLjQ1MywyLjIzLDE3LjAyNSAgIGwwLjAxOSwwLjAxYzMuMjc4LDEyLjUwOCw5LjY4OSwyMy42NzEsMTcuOTg5LDMzLjM5M2M4LjI5NSw5Ljc0NSwxOC40NzIsMTguMDU4LDI5LjE3NiwyNC44MzljMi4zNzEsMS40Nyw0Ljc1MSwyLjg3LDcuMTg3LDQuMjM3ICAgYzMxLjA5NCwxNy4zNTYsNjYuODk4LDI0Ljk2NCwxMDIuNDQ1LDI0Ljk2NGM2LjAxMiwwLDEyLjA2LTAuMjE0LDE4LjAzMy0wLjY0NGMzNS43OTctMi45NTksNzEuNzQyLTEzLjUyNSwxMDAuOC0zNS4xMTUgICBsMC4wMS0wLjAyM2M5LjI1LTYuODM3LDE3LjgxOC0xNS4xMTIsMjQuNTk1LTI0LjUyNWM2LjgwNS05LjQxOCwxMS43ODktMTkuOTQ3LDE0LjAwMi0zMS4zODJWMjc1LjZsMC4wMDktMC4wMSAgIEMzNzMuNjI3LDI3MS4zMiwzNzQuMDY2LDI2Ni45ODUsMzc0LjA2NiwyNjIuNjM1eiBNNDAyLjMyLDIwMC45NWMtMC4wMDktMy43NjItMC44NjgtNy41MDctMi43NTMtMTFsLTAuMDQ3LTAuMDQ0bC0wLjAxOS0wLjA1NiAgIGMtMi41MjEtNS4xOS02LjQ3OS05LjExLTExLjI0OC0xMS43ODJjLTQuNzctMi42OS0xMC4zNTItNC4wNTYtMTUuOTUyLTQuMDU2Yy01LjA2MywwLTEwLjEsMS4xMzItMTQuNTcsMy4zNzkgICBjMTQuMjE2LDEyLjM0NCwyNi42ODcsMjcuMTc5LDM0Ljc0Niw0NC42MzZjMi41OTUtMi4yNTksNC44MDgtNS4wMTgsNi40NjQtOC4wODRDNDAxLjA5OCwyMDkuOTIsNDAyLjMyLDIwNS40MDUsNDAyLjMyLDIwMC45NXoiIGZpbGw9IiMwMDAwMDAiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K",
                    link: "https://reddit.com/submit?title=&url=https://"+url+"?p="
                },
                {
                    name: "Google Plus",
                    imgURL:"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjMycHgiIGhlaWdodD0iMzJweCIgdmlld0JveD0iMCAwIDkwIDkwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA5MCA5MDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxwYXRoIGlkPSJHb29nbGUiIGQ9Ik03NC40OTksMEg1MC4xNDRjLTYuMzgyLDAtMTQuNDIxLDAuOTQyLTIxLjE1OCw2LjQ5Yy01LjA5LDQuMzc0LTcuNTY2LDEwLjM5Mi03LjU2NiwxNS44MjggICBjMCw5LjIxMSw3LjA5NCwxOC41NDYsMTkuNjI1LDE4LjU0NmMxLjE4MiwwLDIuNDc3LTAuMTIsMy43ODctMC4yMzVjLTAuNTkyLDEuNDEzLTEuMTg5LDIuNTk0LTEuMTg5LDQuNjA1ICAgYzAsMy42NjIsMS44OTMsNS45MDIsMy41NDcsOC4wMjljLTUuMzE0LDAuMzUzLTE1LjI0OSwwLjk0Mi0yMi41ODMsNS40MjhjLTYuOTc1LDQuMTQzLTkuMTA3LDEwLjE2LTkuMTA3LDE0LjQxNCAgIEMxNS40OTksODEuODQ2LDIzLjc3OCw5MCw0MC45MjMsOTBjMjAuMzM2LDAsMzEuMDk4LTExLjIyLDMxLjA5OC0yMi4zM2MwLTguMTQzLTQuNzI5LTEyLjE2NC05LjkzMi0xNi41MzRsLTQuMjU4LTMuMzA1ICAgYy0xLjI5NS0xLjA2NS0zLjA2OC0yLjQ3OS0zLjA2OC01LjA4YzAtMi41OTcsMS43NzMtNC4yNTQsMy4zMDctNS43ODljNC45NjQtMy44OTYsOS45MzMtOC4wMyw5LjkzMy0xNi43NyAgIGMwLTguOTc5LTUuNjgtMTMuNzA0LTguMzk2LTE1Ljk0N2g3LjMzNEw3NC40OTksMHogTTY0LjEwMyw3Mi4yNzljMCw3LjMyMi02LjAzMywxMi43NTMtMTcuMzg1LDEyLjc1MyAgIGMtMTIuNjQ4LDAtMjAuODA5LTYuMDI0LTIwLjgwOS0xNC40MDVjMC04LjM5Myw3LjU2OC0xMS4yMTgsMTAuMTY2LTEyLjE2NGM0Ljk2OS0xLjY1NiwxMS4zNTItMS44OTEsMTIuNDE0LTEuODkxICAgYzEuMTg0LDAsMS43NzUsMCwyLjcyNSwwLjExNUM2MC4yMDIsNjMuMDY0LDY0LjEwMyw2Ni4yNTcsNjQuMTAzLDcyLjI3OXogTTU0LjY0MiwzNC4yNDljLTEuODkzLDEuODg2LTUuMDg4LDMuMzA1LTguMDQ1LDMuMzA1ICAgYy0xMC4xNjQsMC0xNC43NzItMTMuMTEzLTE0Ljc3Mi0yMS4wMjNjMC0zLjA3MiwwLjU5Mi02LjI1OCwyLjU5OC04Ljc0YzEuODkzLTIuMzYyLDUuMjAxLTMuODk5LDguMjc3LTMuODk5ICAgYzkuODEyLDAsMTQuODk5LDEzLjIyOSwxNC44OTksMjEuNzNDNTcuNTk5LDI3Ljc1Miw1Ny4zNTgsMzEuNTI4LDU0LjY0MiwzNC4yNDl6IiBmaWxsPSIjMDAwMDAwIi8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==",
                    link: "https://plus.google.com/share?url=https://"+url+"?p="
                },
                {
                    name: "Link",
                    imgURL:"data:image/png;base64,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",
                    link: "https://"+url+"?p="
                }
            ]
        },
        delimiters: ['{[', ']}'],
        methods:{
            closePetition: function () {
                window.document.title = "PawPrints - Make your mark";
                var modal = $("#petition-modal");
                modal.find(".modal-container").cssanimate("fadeOutDown",{hide:false},function(){
                    modal.addClass("hidden").removeAttr("style");
                    modal.find(".modal-container, .modal-overlay").addClass("hidden");
                    modalData.timeline = [];
                });
                modal.find(".modal-overlay").fadeOut(400);
                updatePetitionHistory(false);

                // Let the body scroll again.
                $("html, body").removeClass("no-scroll");
            }
        }
    });
    /**
     * "search" defines how searching petitions is handled.
     * It is bound to the search-container element.
     **/
    timeout = setTimeout(function(){},0);
    var search = new Vue({
        el:"#search-container",
        data:{
            searchString: ""
        },
        methods:{
            search: function(){
                clearTimeout(timeout);
                timeout = setTimeout(function(){
                    if(search.searchString.trim() !== ""){
                        petitions.loading = true;
                        petitions.map = {};
                        petitions.list = [];
                        socket.send('{"command":"search","query":"'+search.searchString+'"}');
                        setTimeout(function(){
                            // Timeout waiting for the websocket response after 3 seconds.
                            petitions.loading = false;
                        },3000);
                    }
                    else{
                        var sort = $("#sort");
                        var filter_tag = sort.data("filter");
                        var sort_by = sort.val();
                        reloadPetitions(sort_by, filter_tag, socket);
                    }
                },300);
            }
        }
    });
    /**
     * "slideshow_images" is the Vue instance that builds slide show images.
     * The data set is randomized before displaying the images in the slide show.
     * Change the limit to change the amount of images in the slide show (set to 0 to show all images).
     * Add more images by copying one of the objects in the images list.
     *  - Setting the sort_rank to anything but 0 will force it to have that value.
     **/
    var slideshow_images = new Vue({
        el:"#parallax-slideshow",
        data:{
            limit:3,
            id_pre:"c",
            images:[
                {
                    url:"/static/images/CampusStock_11.jpg",
                    sort_rank:0
                },
                {
                    url:"/static/images/CampusStock_25.jpg",
                    sort_rank:0
                },
                {
                    url:"/static/images/CampusStock_95.jpg",
                    sort_rank:0
                },
                {
                    url:"/static/images/CampusStock_8.jpg",
                    sort_rank:0
                },
                {
                    url:"/static/images/carousel_1.png",
                    sort_rank:0
                },
                {
                    url:"/static/images/carousel_2.png",
                    sort_rank:0
                },
                {
                    url:"/static/images/carousel_3.png",
                    sort_rank:0
                }
            ]
        },
        delimiters: ['{[', ']}'],
        methods:{
            randomize:function(){
                for(var i = 0; i < this.images.length; i++){
                    var img = this.images[i];
                    if(img.sort_rank === 0) img.sort_rank = Math.random() * this.images.length;
                }
                this.images.sort(function(a,b){return b.sort_rank - a.sort_rank});
            }
        },
        mounted: function(){
            this.randomize();
        }
    });
    function reloadPetitions(sort_by, filter, socket){
        /**
         * This function is responsible for loading all petitions that fit in the given filter + sort set.
         * It just calls "list" on the socket, the actual listing action is handled upon receiving data from the socket
         * (NOT IN THIS FUNCTION).
         **/

        // load the petitions into the Vue instance.
        if($(".current-tag").attr("id") !== filter){

            $(".current-tag").removeClass("current-tag");

        }
        $("#tag-"+filter).addClass("current-tag");
        petitions.loading = true;
        petitions.map = {};
        petitions.list = [];
        socket.send('{"command":"list","sort":"'+sort_by+'","filter":"'+filter+'"}');
        setTimeout(function(){
            // Timeout waiting for the websocket response after 3 seconds.
            petitions.loading = false;
        },3000);

    }
    function updatePetitionHistory(petitionID){
        /**
         * This function is responsible for handling browser history. When called it updates your browser history so you
         * can use back/forward buttons to open / close petitions.
         **/
        // Update history + URL
        var prevURL = window.location.href.split('?')[0];
        prevURL = prevURL.slice(0, -1);
        if(!petitionID && petitionID !== 0){
            window.history.pushState("object or string", "Title", prevURL);
        }
        else{
            window.history.pushState("object or string", "Title", prevURL + "/?p=" + petitionID);
        }
    }
    function getPetition(petitionID){
        /**
         * This function is responsible for grabbing petitions. If the given petition does not exist in the data we have
         * it calls the backend, which then grabs it.
         **/
        if(petitions.map[petitionID] !== undefined){
            return petitions.list[petitions.map[petitionID]];
        }
        else{
            socket.send('{"command":"get","id":'+petitionID+'}');
            return false;
        }
    }
    var decodeHtmlEntity = function(str) {
        return str.replace(/&#(\d+);/g, function(match, dec) {
            return String.fromCharCode(dec);
        });
    };
    function unescape(string){
        /**
         * This function unescapes certain characters sent in the JSON response for each petition so they show up correctly.
         **/
        return decodeHtmlEntity(
                   string.replace(/\\"/g,"'")
                         .replace(/\"/g,'')
                         .replace(/"/g,"")
                         .replace(/\\n/g, "\n")
                         .replace(/\\u2013/g,"<br/>")
        );
    }
    function getDayDifference(date1, date2){
        /**
         * This function computes the difference in days between two EPOCH timestamps.
         **/
        var timeDiff = Math.abs(date2 - date1);
        return Math.floor(timeDiff / (1000 * 3600 * 24));
    }
    function setContentAvailableSpace(modal, additional_margin = 0){
        // Compute the available space for the content of the petition based on the used space.
        var usedSpace = modal.find(".modal-header").height() + modal.find(".modal-footer").height() + 20 - additional_margin;
        modal.find(".modal-body").css({"height":"calc(95vh - "+usedSpace+"px)"}).removeClass("hidden");
    }
    openPetitionLoop = null;
    function openPetition(petitionID, auto_open = false, counter = 0){
        // Renders the petition data into a petition model and also updates browser history.

        var toPetition = getPetition(petitionID); // getPetition returns false if it has to grab a petition not loaded yet.
        if(!toPetition){

            // The petition that was asked for was not loaded in the initial page load, wait for the server to send it over the socket.
            openPetitionLoop = setTimeout(function(){

                if(counter < 10){ // Only loop for a max of 2 seconds.

                    openPetition(petitionID, auto_open, counter+1);

                }
                else{

                    throw "Error: could not load petition.";

                }

            },200);

        }
        else{

            if(!auto_open){
                // If the petition was not in the URL already on page load.
                updatePetitionHistory(petitionID);
            }

            // Update the title of the tab
            window.document.title = ucfirst("PawPrints - "+toPetition.title);

            // Apply petition data to the modal.
            var createdJSDate = new Date(toPetition.timestamp).getTime();
            var expiresJSDate = new Date(toPetition.expires).getTime();
            var currentJSDate = new Date().getTime();

            modalData.petition = {
                title:toPetition.title,
                author:toPetition.author,
                signatures:toPetition.signatures,
                threshold:200,
                expires:toPetition.expires,
                expired:expiresJSDate < currentJSDate,
                timestamp:toPetition.timestamp,
                status:toPetition.status,
                response:toPetition.response.length,
                in_progress:toPetition.in_progress,
                isSigned:toPetition.isSigned,
                id:toPetition.id
            };

            var updates = toPetition.updates;
            var numUpdates = updates.length;
            if(numUpdates > 0){
                for(var i = 0; i < numUpdates; i++){
                    var update = updates[i];
                    var updateJSDate = new Date(update.timestamp).getTime();
                    var updateBlock = {
                        type:"SG Update",
                        author: "",
                        content:unescape(update.description),
                        date: getDayDifference(updateJSDate, currentJSDate)
                    };
                    modalData.timeline.unshift(updateBlock);
                }
            }

            var response;
            if(typeof toPetition.response === "string"){
                response = JSON.parse(toPetition.response);
            }
            else{
                response = toPetition.response;
            }
            if(typeof response === "object"){
                var responseJSDate = new Date(response.timestamp).getTime();
                var responseBlock = {
                    type:"Official Response",
                    author: response.author,
                    content:unescape(response.description),
                    date: getDayDifference(responseJSDate, currentJSDate)
                };
                modalData.timeline.unshift(responseBlock);
            }

            var description = {
                type:"Petition Description",
                author: toPetition.author,
                content:unescape(toPetition.description),
                date: getDayDifference(createdJSDate, currentJSDate)
            };
            modalData.timeline.push(description);

            var createdBlock = {
                type:"created",
                author:toPetition.author
            };
            modalData.timeline.push(createdBlock);

            // Don't let the body scroll when a petition is open.
            $("html, body").addClass("no-scroll");

            // Begin the fade in animation
            var modal = $("#petition-modal");
            modal.removeClass("hidden");
            modal.find(".modal-overlay").fadeIn(400,function(){
                $(this).removeClass("hidden");
            });

            verticalOffset(modal.find(".modal-container"), 0);
            modal.find(".modal-container").cssanimate("fadeInUp",{hide:true},function(){

                setContentAvailableSpace(modal);

                // Center the modal on the screen
                verticalOffset(modal.find(".modal-container"));
                $(window).resize(function(){
                    setContentAvailableSpace(modal);
                    verticalOffset(modal.find(".modal-container"));
                });
            });

            $(document).on("keyup",function(e){
                if(e.keyCode === 27){ // Close the petition when you press the escape key.
                    modalData.closePetition();
                    $(document).unbind("keyup");
                }
            });

        }
    }

    function parseOnePetition(data){
        /**
         * Utilized for the GET command of the websocket on message function, this function parses the list of petitions
         * generated by the serializer in the backend and grabs the first petition object from the petitions list.
         **/
        var petition = false;
        if(data.petition !== false){
             petition = JSON.parse(data.petition).petitions[0];
        }
        return petition;
    }

    function animateUpdate(petitionID){
        /**
         * When an update happens over websockets this function animates the given petition tile to show that an update
         * happened.
         **/

        var petition = $("#petitions-container").find("[data-petition-id="+petitionID+"]");
        petition.cssanimate("pulse",{inline:true});

    }

    function setupSocket(){

        var websocket_debug = window.debug;
        var petitionID;

        // Setup Web Socket.

        var socket_type = window.location.protocol === "https:" ? "wss" : "ws";
        socket = new WebSocket(socket_type+"://" + window.location.host + "/");
        socket.onopen = function (e){

            petitionID = getUrl("p");
            if(petitionID && modalData.petition.id !== Number(petitionID)){
                openPetition(petitionID, true);
            }

        };
        socket.onmessage = function(e) { // Bind to the onmessage event.

            // Get Escape special characters so JSON.parse works.
            var data = e.data.replace(/%/gi,'\%').replace(/"/gi,'\"').replace(/&/gi,'\&');
            try{

                // Parse the response as a JSON.
                data = typeof data === "string" ? JSON.parse(data) : data;

                if(websocket_debug){
                    console.log("Received Websocket Command...");
                    console.log(data);
                }

                // If there is a command sent from the server
                if(data["command"]){

                    var command = data["command"];
                    var modal_petition = modalData.petition;
                    var petition, petition_id, map_pos, modal_timeline_update_block, createdJSDate, currentJSDate;

                    // Command parsing.
                    if(command === "update-sigs"){
                        // Handle the live updating of signatures for petitions.

                        // Format of update-sigs response is as follows: sigs:{sigs:#,petition_id:#}.

                        petition_id = data["petition_id"];
                        var sigs = data["sigs"];

                        if(websocket_debug)console.log("Petition "+petition_id+" now has "+sigs+" signatures!");

                        // Find the petition from its location in the map, and update it's signatures value.
                        petitions.list[petitions.map[petition_id]].signatures = sigs;
                        if(modal_petition.id && modal_petition.id === petition_id){
                            // If the petition is the one that is open at the moment

                            if(websocket_debug)console.log("Petition "+petition_id+" is open, Updating Modal signatures..");
                            modalData.petition.signatures = sigs;

                        }

                        animateUpdate(data["petition_id"]);

                    }
                    else if(command === "new-update"){
                        // Handle petitions getting an update.

                        // Format of new-update response is as follows: update:{description:"",timestamp:"",petition_id:#}.
                        // Add this to the petitions and update the modal if necessary.

                        if(websocket_debug)console.log("Parsing new update");

                        var update = data["update"];

                        petition_id = Number(update["petition_id"]);
                        map_pos = petitions.map[petition_id];

                        if(websocket_debug)console.log("Update for petition "+petition_id);

                        createdJSDate = new Date(update["timestamp"]).getTime();
                        currentJSDate = new Date().getTime();

                        var new_update = {
                            description:update["description"],
                            timestamp:getDayDifference(createdJSDate, currentJSDate)
                        };

                        if(websocket_debug){
                            console.log("New update to push:");
                            console.log(new_update);
                        }

                        // Add the update to the petition in the window object.
                        petitions.list[map_pos].updates.push(new_update);

                        if(websocket_debug)console.log("Modal petition: "+modal_petition);

                        // Check if the petition modal is open, and if it is see if that is the petition being updated.
                        if(modal_petition.id && modal_petition.id === petition_id){

                            if(websocket_debug)console.log("Updating modal petition block.");
                            // The petition in the modal was the one being updated, we need to update its data.
                            modal_timeline_update_block = {
                                type: "SG Update",
                                author: "",
                                content: unescape(new_update.description),
                                date: new_update.timestamp
                            };

                            modalData.timeline.unshift(modal_timeline_update_block);

                            if(websocket_debug)console.log(modalData.timeline);

                        }

                        animateUpdate(update["petition_id"]);

                    }
                    else if(command === "new-response"){
                        // Handle petitions getting a response.

                        // Format of new-response response is as follows: response:{description:"",timestamp:"",petition_id:#}.
                        // Add this to the petitions and update the modal if necessary.

                        var response = data["response"];

                        petition_id = Number(response["petition_id"]);
                        map_pos = petitions.map[petition_id];

                        createdJSDate = new Date(response["timestamp"]).getTime();
                        currentJSDate = new Date().getTime();

                        var new_response = {
                            description:response["description"],
                            timestamp:getDayDifference(createdJSDate, currentJSDate),
                            author:response["author"]
                        };

                        modal_petition = modalData.petition.id;

                        // Add the response to the petition in the window object.
                        petitions.list[map_pos].response = new_response;

                        // Check if the petition modal is open, and if it is see if that is the petition being updated.
                        if(modal_petition && modal_petition === petition_id){

                            // The petition in the modal was the one being updated, we need to update its data.
                            modal_timeline_update_block = {
                                type: "Official Response",
                                author: new_response.author,
                                content: unescape(new_response.description),
                                date: new_response.timestamp
                            };

                            modalData.timeline.unshift(modal_timeline_update_block);

                        }

                        animateUpdate(response["petition_id"]);

                    }
                    else if(command === "get"){
                        // Handle opening a single petition.

                        petition = parseOnePetition(data);
                        if(petition){
                            petitions.list.push(petition);
                            petitions.map[petition.id] = petitions.list.indexOf(petition);
                            animateUpdate(petition.id);
                            petitions.loading = false;
                        }
                        else{
                            clearTimeout(openPetitionLoop);
                        }

                    }
                    else if(command === "new-petition"){
                        // Handle loading into the page a new petition.

                        if(websocket_debug)console.log("New petition was made, trying to open it.");
                        getPetition(Number(data["petition"]["petition_id"]));

                    }
                    else if(command === "remove-petition"){
                        // Handle the removing of a petition

                        if(websocket_debug)console.log("Petition was deleted, removing it..");
                        petition_id = data["petition"]["petition_id"];
                        if(petitions.map.hasOwnProperty(petition_id)){
                            petitions.list[petitions.map[petition_id]].deleted = true;
                            delete petitions.map[petition_id];
                            if( modal_petition.id === Number(petition_id) ){
                                modalData.closePetition();
                            }
                        }

                    }
                    else if(command === "mark-in-progress"){
                        // Handle someone marking a petition in progresss

                        if(websocket_debug)console.log("Petition was marked as in progress, updating it.");
                        petition_id = data["petition"]["petition_id"];
                        if(petitions.map.hasOwnProperty(petition_id)){
                            petitions.list[petitions.map[petition_id]].in_progress = true;
                            if( modal_petition.id === Number(petition_id) ){
                                modalData.petition.in_progress = true;
                            }
                        }

                    }
                    else{
                        console.log("Unrecognized command: "+command);
                        console.log(data);
                    }

                }
                else{

                    // Default behaviour is to update everything on response if no command is given.
                    if(data.hasOwnProperty("petitions")){
                        petitions.list = data["petitions"];
                        petitions.map = data["map"];
                        petitions.loading = false;
                        petitionID = getUrl("p");
                        if(petitionID){
                            openPetition(petitionID, true);
                        }
                    }
                    else{

                        if(websocket_debug)console.log("Default action failed; petitions object does not exist in response.");

                    }

                }

            }
            catch(error){

                // Catch any errors and reset the petition data.
                console.log("Error: "+error+". Data: ");
                console.log(data);
                updatePetitionHistory(false);

            }

        };

    }

    $(document).ready(function(){

        setupSocket();

        // Bind parallax effects.
        $("#parallax-slideshow").parallax({divisor:-2.5});
        $("#parallax-overlay").parallax({divisor:-5,offset:30});
        $(".slideshow-container").slideshow();

        // Event Listeners.
        $(document).on("click", ".tag", function(){
            // Bind the click event on elements with the tag class

            // Get the tag name
            var filter_tag = $(this).data("tag");

            // Get the sort key
            var sort = $("#sort");
            var sort_by = sort.val();
            sort.data("filter",filter_tag);

            // Update the select field for mobile devices
            $("#mobile-filter").val(filter_tag);

            // Reload all of the petitions with the updated information.
            reloadPetitions(sort_by, filter_tag, socket);

            var to_elem = $("#petitions");
            scroll(to_elem);

        });

        $("#sort").change(function(){

            // Grab the tag name
            var filter_tag = $("#sort").data("filter");

            // Grab the sort key
            var sort_by = $(this).val();

            // Reload all of the petitions with the updated information.
            reloadPetitions(sort_by, filter_tag, socket);

        });

        $("#mobile-filter").change(function(){

            // Grab the tag name
            var filter_tag = $(this).val();
            $("#sort").data("filter",filter_tag);

            // Grab the sort key
            var sort_by = $("#sort").val();

            // Reload all of the petitions with the updated information.
            reloadPetitions(sort_by, filter_tag, socket);

        });

        $(document).on("click","#action-drawer-icon-container",function(){
            var me = $(this);
            var icon = me.find("i");
            var actionCards = $("#action-cards");
            if(icon.html() === "keyboard_arrow_down"){
                icon.html("keyboard_arrow_up");
                actionCards.data("closed",true);
            }
            else{
                icon.html("keyboard_arrow_down");
                actionCards.data("closed",false);
            }
            setContentAvailableSpace($("#petition-modal"),200); // Extend the petition modal box too much so the animation is smooth
            actionCards.toggle(200,"linear",function(){
                setContentAvailableSpace($("#petition-modal")); // Resize the box so it is the correct size.
            });
        });

        $(document).on("click", ".petition", function(e){
            if(!$(e.target).hasClass("tag")){
                var petitionID = $(this).data("petition-id");
                openPetition(petitionID);
            }

        });

        $(document).on("click","#sign-petition-button",function(){
            var petition = getUrl("p");
            petitions.list[petitions.map[petition]].isSigned = 1;
            $.post('/petition/sign/'+petition,{"csrfmiddlewaretoken":get_csrf()},function(r){
                if(r !== petition){
                    console.log("Sign Petition response: "+r);
                }
                if(modalData.petition.id === Number(petition)){

                    modalData.petition.isSigned = 1;

                }
            });
        });

        $(document).on("click","#publish-button",function(){
            var petition = getUrl("p");

            window.popup = new Modal({
                headerContent:"<h2>Are you sure you want to publish this petition?</h2>",
                bodyContent:"<p class='padding-bottom'>You cannot edit or delete it once it is published.</p>",
                iconContainerClass:"text-highlight",
                iconClass:"md-48",
                iconText:"warning",
                bodyButtons: [
                    ["Cancel","material material-button minimal material-shadow margin-top margin-bottom transition","window.popup.close()"],
                    ["Confirm", "material material-button material-shadow margin-bottom margin-top transition cursor","publishPetition("+petition+")"]
                ]
            });
            popup.open();

        });

        window.onpopstate = function () {
            //Refresh the page on back.
            location.reload();
        };

    });
    $(window).resize(function(){

        Waypoint.refreshAll();
        var actionCards = $("#action-cards");
        if($(window).width() > 830 && actionCards.data("closed")){
            // Open the action cards when the width of the window is over 830px and they are currently hidden.
            setContentAvailableSpace($("#petition-modal"),200); // Extend the petition modal box too much so the animation is smooth
            actionCards.show(200,"linear",function(){
                actionCards.data("closed",false);
                setContentAvailableSpace($("#petition-modal")); // Resize the box so it is the correct size.
            });
            $("#action-drawer-icon-container").find("i").html("keyboard_arrow_down"); // Update the icon so it
        }
        else{
            setContentAvailableSpace($("#petition-modal"));
        }

    });
</script>
</html>